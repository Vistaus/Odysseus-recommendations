<!DOCTYPE html>
<html>
<head>
  <title>Welcome to Odysseus!</title>
  <style>
    body {
      font: medium sans-serif;
      text-align: center;
    }
    ul {display: block;}
    li {display: inline;}
    img {height: 128px; width: 128px;}
  </style>
  <script src="zepto.js"></script>
  <script>
    $.get("tsv/en.tsv", (text) => $(() => {
        var tsv = text.split("\n").map((tuple) => tuple.split("\t"))
            .filter((tuple) => tuple.length > 1)
        tsv.map((tuple) => tuple.push(Math.random() * tuple[0]))
        tsv.sort((a, b) => a[3] - b[3])
        tsv = tsv.slice(0, 40)
        $('ul').empty()
        var tuple
        for (tuple of tsv)
          $('ul').append($('<li>').append(
            $('<a>').attr('href', tuple[1]).append(
              $('<img>').attr('src', "data:image/png;base64," + tuple[2])
            )
          ))

        console.log(tuple)
    }))
  </script>
</head>
<body>
  <h1>Here's some cool links for you to check out!</h1>

  <ul><li>Loading...</li></ul>
</body>
</html>
